[gd_scene load_steps=11 format=3 uid="uid://dscy83pxwa27q"]

[ext_resource type="Script" uid="uid://csty00f88twjf" path="res://Main.cs" id="1"]
[ext_resource type="Script" uid="uid://e4240ba1f2d2" path="res://ClothDefinition.cs" id="2"]
[ext_resource type="Script" uid="uid://093847094a17" path="res://SampleUi.cs" id="4"]
[ext_resource type="Script" uid="uid://b1a051012f04" path="res://ColliderMover.cs" id="5"]
[ext_resource type="Script" uid="uid://81e9b6db9085" path="res://TubeMesh.cs" id="6"]

[sub_resource type="PlaneMesh" id="1"]
size = Vector2(1, 1)
subdivide_width = 15
subdivide_depth = 15

[sub_resource type="PrimitiveMesh" id="2"]
script = ExtResource("6")
radial_segments = 20
height_segments = 15
radius = 0.5
height = 1.0

[sub_resource type="PlaneMesh" id="3"]
size = Vector2(2, 2)
subdivide_width = 30
subdivide_depth = 30

[sub_resource type="PlaneMesh" id="4"]
size = Vector2(1, 1)
subdivide_width = 15
subdivide_depth = 15

[sub_resource type="SphereMesh" id="6"]
radius = 0.4
height = 0.8


[sub_resource type="Environment" id="5"]

[node name="Main" type="Node3D"]
script = ExtResource("1")

[node name="Camera" type="Camera3D" parent="."]
current = true

[node name="Sun" type="DirectionalLight3D" parent="."]
light_color = Color(1, 0.98, 0.95, 1)
light_energy = 2.2
rotation_degrees = Vector3(-45, 30, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("5")
[node name="Ground" type="MeshInstance3D" parent="."]

[node name="Scenarios" type="Node3D" parent="."]

[node name="Minimal" type="Node3D" parent="Scenarios"]

[node name="Cloth" type="MeshInstance3D" parent="Scenarios/Minimal"]
mesh = SubResource("1")
script = ExtResource("2")

[node name="Tube" type="Node3D" parent="Scenarios"]

[node name="Cloth" type="MeshInstance3D" parent="Scenarios/Tube"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.3, 0)
mesh = SubResource("2")
script = ExtResource("2")

[node name="Collision" type="Node3D" parent="Scenarios"]

[node name="Cloth" type="MeshInstance3D" parent="Scenarios/Collision"]
mesh = SubResource("3")
script = ExtResource("2")

[node name="Collider" type="MeshInstance3D" parent="Scenarios/Collision"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.3, 1)
mesh = SubResource("6")
script = ExtResource("5")
radius = 0.4
height = 0.8
motion_amplitude = Vector3(0.15, 0.05, 0.15)
motion_frequency = Vector3(0.9, 1.2, 0.7)

[node name="Large" type="Node3D" parent="Scenarios"]

[node name="Cloth" type="MeshInstance3D" parent="Scenarios/Large"]
mesh = SubResource("4")
script = ExtResource("2")


[node name="UI" type="CanvasLayer" parent="."]
layer = 100

[node name="Panel" type="PanelContainer" parent="UI"]
position = Vector2(10, 10)
script = ExtResource("4")

[node name="VBox" type="VBoxContainer" parent="UI/Panel"]

[node name="Title" type="Label" parent="UI/Panel/VBox"]
text = "DotCloth Ã— Godot Sample"

[node name="Instructions" type="Label" parent="UI/Panel/VBox"]
text = "LMB: Pin | MMB: Unpin | RMB: Orbit | Wheel: Zoom | R: Reset Pins"

[node name="ScenarioSelector" type="HBoxContainer" parent="UI/Panel/VBox"]

[node name="ScenarioLabel" type="Label" parent="UI/Panel/VBox/ScenarioSelector"]
text = "Scenario"

[node name="ScenarioOption" type="OptionButton" parent="UI/Panel/VBox/ScenarioSelector"]

[node name="ScenarioDesc" type="Label" parent="UI/Panel/VBox"]

[node name="Iterations" type="HBoxContainer" parent="UI/Panel/VBox"]

[node name="IterationsLabel" type="Label" parent="UI/Panel/VBox/Iterations"]
text = "Iterations"

[node name="IterationsSlider" type="HSlider" parent="UI/Panel/VBox/Iterations"]
min_value = 1.0
max_value = 64.0
step = 1.0
custom_minimum_size = Vector2(180, 0)

[node name="Stretch" type="HBoxContainer" parent="UI/Panel/VBox"]

[node name="StretchLabel" type="Label" parent="UI/Panel/VBox/Stretch"]
text = "Stretch"

[node name="StretchSlider" type="HSlider" parent="UI/Panel/VBox/Stretch"]
min_value = 0.0
max_value = 1.0
step = 0.01
custom_minimum_size = Vector2(180, 0)

[node name="Bend" type="HBoxContainer" parent="UI/Panel/VBox"]

[node name="BendLabel" type="Label" parent="UI/Panel/VBox/Bend"]
text = "Bend"

[node name="BendSlider" type="HSlider" parent="UI/Panel/VBox/Bend"]
min_value = 0.0
max_value = 1.0
step = 0.01
custom_minimum_size = Vector2(180, 0)

[node name="PerfLabel" type="Label" parent="UI/Panel/VBox"]
text = "Perf: --"

[node name="ScenarioPanel" type="PanelContainer" parent="UI"]
anchor_left = 1.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = -300.0
offset_top = 10.0
offset_right = -10.0

[node name="ScenarioVBox" type="VBoxContainer" parent="UI/ScenarioPanel"]

